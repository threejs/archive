<!DOCTYPE html>
<html lang="zh">
	<head>
		<meta charset="utf-8" />
		<base href="../../../" />
		<script src="page.js"></script>
		<link type="text/css" rel="stylesheet" href="page.css" />
	</head>
	<body>
		[page:Loader] &rarr;

		<h1>[name]</h1>

		<p class="desc">
			PLY（Polygon File Format）多边形文件格式，也称为斯坦福（Stanford）三角形格式的加载器。[name] 支持 ASCII 和二进制文件，包含以下 PLY 属性：
			<ul>
				<li>x, y, z (vertex positions)</li>
				<li>nx, ny, nz (vertex normals)</li>
				<li>s, t / u, v (texture coordinates)</li>
				<li>red, green, blue (vertex colors)</li>
				<li>vertex_indices (face indices)</li>
				<li>通过属性名称映射自定义属性</li>
			</ul>
		</p>

		<h2>导入</h2>

		<p>
			[name] 是一个附加组件，必须显式导入。请参阅 [link:#manual/introduction/Installation Installation / Addons]。
		</p>

		<code>
			import { PLYLoader } from 'three/addons/loaders/PLYLoader.js';
		</code>

		<h2>代码示例</h2>

		<code>

		// instantiate a loader
		const loader = new PLYLoader();

		// load a resource
		loader.load(
			// resource URL
			'models/ply/ascii/dolphins.ply',
			// called when the resource is loaded
			function ( geometry ) {
        // compute vertex normals if not present in the file
        geometry.computeVertexNormals();
				const material = new THREE.MeshStandardMaterial( { color: 0x0055ff } );
				const mesh = new THREE.Mesh( geometry, material );
				scene.add( mesh );

			},
			// called when loading is in progress
			function ( xhr ) {

				console.log( ( xhr.loaded / xhr.total * 100 ) + '% loaded' );

			},
			// called when loading has errors
			function ( error ) {

				console.log( 'An error happened' );

			}
		);
		</code>

		<h2>例子</h2>
		<p>
			[example:webgl_loader_ply]
		</p>

		<h2>构造函数</h2>

		<h3>[name]( [param:LoadingManager manager] )</h3>
		<p>
		[page:LoadingManager manager] — 加载器使用的 [page:LoadingManager loadingManager] 。默认值为 [page:LoadingManager THREE.DefaultLoadingManager]。
		</p>
		<p>
		创建一个 [name] 实例。
		</p>

		<h2>属性</h2>
		<p>有关公共属性，请参阅 [page:Loader] 基类。</p>

		<h3>[page:Object propertyNameMapping]</h3>
		<p>
		将默认属性名称映射到自定义属性名称的对象。用于处理非标准 PLY 属性名称。
		</p>

		<h3>[page:Object customPropertyMapping]</h3>
		<p>
		定义标准位置、法线、uv 和颜色属性未涵盖的属性的自定义属性映射的对象。
		</p>

		<h2>方法</h2>
		<p>有关常用方法，请参阅 [page:Loader] 基类。</p>

		<h3>[method:undefined load]( [param:String url], [param:Function onLoad], [param:Function onProgress], [param:Function onError] )</h3>
		<p>
		[page:String url] — 包含 `.ply` 文件路径/URL 的字符串。<br />
		[page:Function onLoad] — （可选）加载成功完成后调用的函数。该函数接收具有以下属性的对象 [page:BufferGeometry]。<br />
		[page:Function onProgress] — （可选）加载过程中调用的函数。参数将是 XMLHttpRequest 实例，其中包含 .[page:Integer total] 和 .[page:Integer
		loaded] 字节。如果服务器没有设置 Content-Length，.[page:Integer total] 将为 0。<br />
		[page:Function onError] — （可选）加载期间发生错误时调用的函数。该函数接收错误作为参数。<br />
		</p>
		<p>
		开始从 url 加载并使用解析后的响应内容调用 onLoad。
		</p>

		<h3>[method:BufferGeometry parse]( [param:ArrayBuffer data] )</h3>
		<p>
		[page:ArrayBuffer data] — 要解析的二进制或文本结构
		</p>
		<p>
		解析 PLY 二进制或 ASCII 结构并返回 [page:BufferGeometry]。<br />
		几何图形(geometry) 包含顶点位置，并且可能包括顶点法线、纹理坐标、顶点颜色和面索引，具体取决于 PLY 文件内容。
		</p>

		<h3>[method:undefined setPropertyNameMapping]( [param:Object mapping] )</h3>
		<p>
		[page:Object mapping] — 将默认属性名称映射到自定义属性名称的对象。
		</p>
		<p>
		设置属性名称映射，将默认属性名称映射到自定义属性名称。例如，以下内容将文件中的属性 "diffuse_(red|green|blue)" 映射到标准颜色名称：
		</p>
		<code>
		loader.setPropertyNameMapping( {
			diffuse_red: 'red',
			diffuse_green: 'green',
			diffuse_blue: 'blue'
		} );
		</code>

		<h3>[method:undefined setCustomPropertyNameMapping]( [param:Object mapping] )</h3>
		<p>
		[page:Object mapping] — 定义自定义属性映射的对象。
		</p>
		<p>
		可以使用此方法添加除位置、UV、法线和颜色属性的默认属性之外的自定义属性。例如，以下内容将元素属性 "custom_property_a" 和 "custom_property_b" 映射到项目大小为 2 的属性 "customAttribute"：
		</p>
		<code>
		loader.setCustomPropertyNameMapping( {
			customAttribute: ['custom_property_a', 'custom_property_b']
		} );
		</code>

		<h2>源码</h2>

		<p>
			[link:https://github.com/mrdoob/three.js/blob/master/examples/jsm/loaders/PLYLoader.js examples/jsm/loaders/PLYLoader.js]
		</p>
	</body>
</html>
