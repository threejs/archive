<!DOCTYPE html>
<html lang="zh">
	<head>
		<meta charset="utf-8" />
		<base href="../../../" />
		<script src="page.js"></script>
		<link type="text/css" rel="stylesheet" href="page.css" />
	</head>
	<body>
		<h1>USDZ导出器（[name]）</h1>

		<p class="desc">
		一个用于 `USDZ` 的导出器。
		<br /><br />
		[link:https://graphics.pixar.com/usd/docs/index.html USDZ]（通用场景描述 ZIP 压缩包）是一种基于 [link:https://openusd.org/release/index.html USD-based format] 3D 内容格式，专为共享和查看而优化。
		USDZ 文件是包含 USD 场景数据和相关纹理的 ZIP 压缩包。该格式支持网格、材质、纹理和摄像机。
		</p>

		<h2>导入</h2>

		<p>
			[name] 是一个附加组件，必须显式导入。请参阅 [link:#manual/introduction/Installation Installation / Addons]。
		</p>

		<code>
			import { USDZExporter } from 'three/addons/exporters/USDZExporter.js';
		</code>

		<h2>Features</h2>

		<p>
			[name] 支持以下特性：
		</p>

		<ul>
			<li>网格 - 使用 MeshStandardMaterial 的网格。</li>
			<li>纹理 - diffuse, normal, emissive, roughness, metalness, alpha, ambient occlusion</li>
			<li>透明涂层和透明涂层粗糙度 (来自 MeshPhysicalMaterial)</li>
			<li>相机 - 透视或正交相机</li>
			<li>面向 iOS Quick Look 的 AR 锚定属性</li>
			<li>通过纹理工具集实现的纹理压缩支持</li>
		</ul>

		<h2>代码示例</h2>

		<code>
		// Instantiate a exporter
		const exporter = new USDZExporter();

		// Configure export options
		const options = { maxTextureSize: 2048 };

		try {

			// Parse the input and generate the USDZ output
			const arraybuffer = await exporter.parseAsync( scene, options );
			downloadUSDZ( arraybuffer );

		} catch ( error ) {

			console.error( 'Export failed:', error );

		}
		</code>

		<h2>例子</h2>

		<p>
			[example:misc_exporter_usdz]
		</p>

		<h2>构造函数</h2>

		<h3>[name]()</h3>
		<p>
		</p>
		<p>
		创建一个 [name] 实例。
		</p>

		<h2>方法</h2>

		<h3>[method:undefined parse]( [param:Object3D scene], [param:Function onCompleted], [param:Function onError], [param:Object options] )</h3>

		<p>
		[page:Object3D scene] — 要导出的场景或对象<br />
		[page:Function onCompleted] — 导出完成后将被调用。参数为导出的 USDZ ArrayBuffer。<br />
		[page:Function onError] — 如果在 USDZ 导出过程中出现任何错误，将会被调用。<br />
		[page:Options options] — 导出选项<br />
		<ul>
			<li>`maxTextureSize` - int. 将图像最大尺寸（宽度和高度）限制为给定值。默认为 1024。</li>
			<li>`includeAnchoringProperties` - bool. 是否包含 AR 的锚定属性。默认为 true。</li>
			<li>`onlyVisible` - bool. 仅导出可见对象。默认为 true。</li>
			<li>`quickLookCompatible` - bool. 是否导出的 USDZ 兼容 Apple 的 QuickLook。默认为 false。</li>
			<li>`ar` - Object. AR-specific options 包括锚定类型和平面锚定对齐。</li>
		</ul>
		</p>
		<p>
		从输入的 Object3D 导出 USDZ ArrayBuffer。请注意，仅支持 MeshStandardMaterial。
		</p>

		<h3>[method:Promise parseAsync]( [param:Object3D scene], [param:Object options] )</h3>

		<p>
			从输入 Object3D 生成 USDZ ArrayBuffer 输出。
		</p>
		<p>
			这与 [page:.parse]() 方法类似，但它不接受回调，而是返回一个使用 ArrayBuffer 结果解析的 Promise，其他方面也接受相同的选项。
		</p>

		<h3>[method:undefined setTextureUtils]( [param:Object utils] )</h3>

		<p>
			设置此导出器的纹理实用程序。仅在必须导出压缩纹理时才相关。
			根据您使用的是 WebGLRender 还是 WebGPURender，您必须注入相应的纹理实用程序 WebGLTextureUtils 或 WebGPUTextureUtils。
		</p>

		<h2>源码</h2>

		<p>
			[link:https://github.com/mrdoob/three.js/blob/master/examples/jsm/exporters/USDZExporter.js examples/jsm/exporters/USDZExporter.js]
		</p>
	</body>
</html>
